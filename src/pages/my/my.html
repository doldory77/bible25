<ion-header>

  <ion-navbar>
    <ion-title>마이페이지</ion-title>
  </ion-navbar>

  <div class="my-tab-menu">
    <div class="menu-item" [ngClass]="{highlight:menu.selected}" *ngFor="let menu of getMenu(); let i = index" (click)="toggleTabMenu(i)">
      {{menu.title}}
    </div>
  </div>

</ion-header>


<ion-content>
  <div *ngIf="currViewMode == 0">
    <div class="bookmark-list-header">
      <div>성경</div>
      <div (click)="isBibleShow = !isBibleShow">
        <ion-icon [name]="isBibleShow ? 'arrow-down' : 'arrow-forward'"></ion-icon>
      </div>
    </div>
    <ion-list *ngIf="isBibleShow">
      <ion-item *ngFor="let item of bibleBookMarkData">
        <div class="bookmark-item">
          <div (click)="goBibleContent(item.book, item.jang)">{{item.bibletype}} >{{item.name}} > {{item.jang}}장 <span class="bookmark-item-jul">({{item.jul}})절</span></div>
          <div (click)="removeBibleBookMark(item)">
            <ion-icon name="trash"></ion-icon>
          </div>
        </div>
      </ion-item>
    </ion-list>

    <div class="bookmark-list-header">
      <div>찬송</div>
      <div (click)="isHymnShow = !isHymnShow">
        <ion-icon [name]="isHymnShow ? 'arrow-down' : 'arrow-forward'"></ion-icon>
      </div>
    </div>
    <ion-list *ngIf="isHymnShow">
      <ion-item *ngFor="let item of hymnBookMarkData">
        <div class="bookmark-item">
          <div>
            <div (click)="goHymnContent(item.p_num)">{{item.p_num}}. {{item.subject}}</div>
            <div class="hymn-sub-title">통일찬송가 {{item.p_num_old}}장</div>
          </div>
          <div (click)="removeHymnBookMark(item)">
            <ion-icon name="trash"></ion-icon>
          </div>
        </div>
      </ion-item>
    </ion-list>
  </div>

  <ion-list *ngIf="currViewMode == 1">
    <ion-item>
      <ion-label>성경읽기여부</ion-label>
      <ion-toggle [(ngModel)]="isReadingSchedul"></ion-toggle>
    </ion-item>
    <ion-item>
      <ion-label>시작한 날짜:</ion-label>
      <ion-datetime displayFormat="YYYY-MM-DD" [(ngModel)]="startReadingDate"></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>목표한 날짜:</ion-label>
      <ion-datetime displayFormat="YYYY-MM-DD" [(ngModel)]="endReadingDate"></ion-datetime>
    </ion-item>
    <!-- <ion-item>
      <ion-label>목표량:</ion-label>
      <ion-select (ionChange)="setReadingAmount($event)" [(ngModel)]="targetAmount" interface="popover">
        <ion-option value="1">1독</ion-option>
        <ion-option value="2">2독</ion-option>
        <ion-option value="3">3독</ion-option>
        <ion-option value="4">4독</ion-option>
      </ion-select>
    </ion-item> -->
    <ion-item>
      <div>경과일수:</div>
      <div item-end class="bible-range">
        <div class="bible-range-outer">
          <div class="bible-range-inner" [style.width]="untilCurrDayPercentByCeil"></div>
        </div>
        <div class="bible-range-display">
          <div>{{currDayCount}}/{{totalDurationDayCount}}</div>
          <div>{{untilCurrDayPercent}}%</div>
        </div>
      </div>
    </ion-item>
    <ion-item>
      <div>학습장수:</div>
      <div item-end class="bible-range">
        <div class="bible-range-outer">
          <div class="bible-range-inner" [style.width]="untilCurrLearnJangPercentByCeil"></div>
        </div>
        <div class="bible-range-display">
          <div>{{currDayLearnJangCount}}/{{totalLearnJangCount}}</div>
          <div>{{untilCurrLearnJangPercent}}%</div>
        </div>
      </div>
    </ion-item>
    <ion-item *ngIf="isReadingSchedul && currDayLearnJangCount > 0">
      <div>현재까지는 매일 평균 {{untilCurrAvgJangCnt}}장씩 읽으셨습니다.</div>
      <div>앞으로 매일 {{remainExpectationAvgJangCnt}}장씩 읽으시면 됩니다.</div>
    </ion-item>
    <ion-item>
      <div class="bible-range-button-box">
        <button ion-button (click)="resetLearnBible()">설정초기화</button>
        <button ion-button (click)="saveLearnConfig()">설정저장</button>
        <button ion-button [navPush]="'LearnBiblePage'">진도현황</button>
      </div>
    </ion-item>
  </ion-list>
  
  <ion-list *ngIf="currViewMode == 2">
    <ion-item>
      원활안 서비스 이용을 위해 최소 정보가 필요합니다.
    </ion-item>
    <ion-item>
      <ion-label floating>사용자명/별칭</ion-label> 
      <ion-input type="text" [(ngModel)]="user.nickname"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>소속교회</ion-label>
      <ion-select [(ngModel)]="user.church">
        <ion-option *ngFor="let church of churches" [value]="church.id" [selected]="user.church == church.id">{{church.name}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>연령대</ion-label>
      <ion-select [(ngModel)]="user.age">
        <ion-option *ngFor="let age of ages" [value]="age.code" [selected]="age.code == user.age">{{age.name}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>성별</ion-label>
      <ion-select [(ngModel)]="user.gender">
        <ion-option *ngFor="let gender of genders" [value]="gender.code" [selected]="gender.code == user.gender">{{gender.name}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>가입목적</ion-label>
      <ion-select [(ngModel)]="user.join_purpose">
        <ion-option *ngFor="let purpose of purposes" [value]="purpose.code" [selected]="purpose.code == user.join_purpose">{{purpose.name}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-buttons>
      <button ion-button full>저장</button>
    </ion-buttons>
  </ion-list>

</ion-content>
